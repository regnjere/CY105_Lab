<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>CY105 Bluefruit Lab</title>
    <link href="styles/style.css" rel="stylesheet" type="text/css" />
    <script src="https://kit.fontawesome.com/c16180f477.js" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script src="scripts/map_highlight/jquery.maphilight.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="styles/foundation.min.css">
</head>

<body>
    <ul class="nav nav-tabs">
        <li class="nav-item">
            <a class="nav-link" href="index.html">Welcome</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="Initial_Steps.html"><span style="font-size: 1em; color:blue;"><i
                        class="fa-solid fa-terminal"></i></span> Initial Steps</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" aria-current="page" href="Understanding_your_board.html"><span
                    style="font-size: 1em; color:blue;"><i class="fa-solid fa-microchip"></i></span> Understanding your
                board</a>
        </li>
        <li class="nav-item">
            <a class="nav-link active" href="#"><span style="font-size: 1em; color: blue;"><i
                        class="fa-solid fa-temperature-three-quarters"></i></span> Sensors</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="Robotics_Lab.html"><span style="font-size: 1em; color:blue;"><i
                        class="fa-solid fa-robot"></i></span> Robotics</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="Troubleshooting.html"><span style="font-size: 1em; color: red;"><i
                        class="fa-solid fa-bug"></i></span> Troubleshooting</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="Further Reading.html"><span style="font-size: 1em; color: green;"><i
                        class="fa-solid fa-book"></i></span> Further Reading</a>
        </li>
    </ul>
    <div class="offcanvas offcanvas-start" tabindex="-1" id="BluefruitOffcanvas"
    aria-labelledby="offcanvasExampleLabel">
    <div class="offcanvas-body">
        <img src="Images/Bluefruit.jpg" alt="Bluefruit Board" style="width: 240px" usemap="#BluefruitComponents"
            class="map">
        <map name="BluefruitComponents">
            <!--Inputs-->
            <area id="rstBtn" shape="rect" coords="112,104,130,125" href="#" title="Rest Button">
            <area id="switch" shape="rect" coords="105,155,136,172" href="#" title="Switch">
            <area id="tempSensor" shape="rect" coords="144,62,164,87" href="#" title="Temperature Sensor">
            <area id="micSensor" shape="rect" coords="165,135,183,149" href="#" title="Microphone">
            <area id="accelSensor" shape="rect" coords="140,137,157,169" href="#" title="Accelerometer">
            <area id="lightSensor" shape="rect" coords="85,67,104,95" href="#" title="Light Sensor">
            <area id="btnA" shape="rect" coords="62,103,88,131" href="#" title="Button A">
            <area id="btnB" shape="rect" coords="152,103,181,131" href="#" title="Button B">
            <area class="capTouch" id="A1" shape="circle" coords="222,158,14" title="A1"
                data-maphilight='{"groupBy":".capTouch"}'>
            <area class="capTouch" id="A2" shape="circle" coords="222,85,14" title="A2"
                data-maphilight='{"groupBy":".capTouch"}'>
            <area class="capTouch" id="A3" shape="circle" coords="203,53,14" title="A3"
                data-maphilight='{"groupBy":".capTouch"}'>
            <area class="capTouch" id="A4" shape="circle" coords="39,54,14" title="A4"
                data-maphilight='{"groupBy":".capTouch"}'>
            <area class="capTouch" id="A5" shape="circle" coords="22,85,14" title="A5"
                data-maphilight='{"groupBy":".capTouch"}'>
            <area class="capTouch" id="A6" shape="circle" coords="22,158,14" title="A5"
                data-maphilight='{"groupBy":".capTouch"}'>
            <area class="capTouch" id="TX" shape="circle" coords="41,191,14" title="TX"
                data-maphilight='{"groupBy":".capTouch"}'>
            <!--Outputs-->
            <area id="speaker" shape="rect" coords="66,134,101,168" href="#" title="Speaker">
            <area id="redLED" shape="rect" coords="148,15,152,25" href="#" title="Red LED">
            <area class="neoPixels" id="NP0" shape="circle" coords="81,53,12" title="NeoPixel-0"
                data-maphilight='{"groupBy":".neoPixels"}'>
            <area class="neoPixels" id="NP1" shape="circle" coords="53,83,12" title="NeoPixel-1"
                data-maphilight='{"groupBy":".neoPixels"}'>
            <area class="neoPixels" id="NP2" shape="circle" coords="42,122,12" title="NeoPixel-2"
                data-maphilight='{"groupBy":".neoPixels"}'>
            <area class="neoPixels" id="NP3" shape="circle" coords="53,163,12" title="NeoPixel-3"
                data-maphilight='{"groupBy":".neoPixels"}'>
            <area class="neoPixels" id="NP4" shape="circle" coords="84,192,12" title="NeoPixel-4"
                data-maphilight='{"groupBy":".neoPixels"}'>
            <area class="neoPixels" id="NP5" shape="circle" coords="161,190,12" title="NeoPixel-5"
                data-maphilight='{"groupBy":".neoPixels"}'>
            <area class="neoPixels" id="NP6" shape="circle" coords="191,160,12" title="NeoPixel-6"
                data-maphilight='{"groupBy":".neoPixels"}'>
            <area class="neoPixels" id="NP7" shape="circle" coords="201,123,12" title="NeoPixel-7"
                data-maphilight='{"groupBy":".neoPixels"}'>
            <area class="neoPixels" id="NP8" shape="circle" coords="191,85,12" title="NeoPixel-8"
                data-maphilight='{"groupBy":".neoPixels"}'>
            <area class="neoPixels" id="NP9" shape="circle" coords="161,54,12" title="NeoPixel-9"
                data-maphilight='{"groupBy":".neoPixels"}'>
            <!--Other-->
            <area id="greenLED" shape="rect" coords="90,14,95,25" href="#" title="Power Indicator LED">
            <area id="USB" shape="rect" coords="105,5,139,31" href="#" title="USB Port">
            <area id="CPU" shape="rect" coords="107,65,140,97" href="#" title="CPU">
        </map>
        <ol class="list-group list-group-numbered" style="font-size: 10px;">
            <li class="list-group-item d-flex justify-content-between align-items-start">
                <div class="ms-2 me-auto">
                    <div class="fw-bold">Sensors/Inputs</div>
                    <ol class="alpha">
                        <div>
                            <li><a href="#" id="rstBtnList">Reset Button</a></li>
                            <li><a href="#" id="switchList">Switch</a></li>
                            <li><a href="#" id="tempList">Temperature</a></li>
                            <li><a href="#" id="micList">Microphone</a></li>
                            <li><a href="#" id="accelList">Accelerometer (measures acceleration in 3D)</a></li>
                            <li><a href="#" id="lightList">Light</a></li>
                            <li><a href="#" id="btnAList">Button A</a></li>
                            <li><a href="#" id="btnBList">Button B</a></li>
                            <li><a href="#" id="capList">Capacitive touch sensors (A1-A6 and TX)</a></li>
                        </div>
                    </ol>
                </div>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-start">
                <div class="ms-2 me-auto">
                    <div class="fw-bold">Outputs</div>
                    <ol class="alpha">
                        <div>
                            <li><a href="#" id="speakerList">Speaker</a></li>
                            <li><a href="#" id="redLEDList">Red LED (right of the USB)</a></li>
                            <li><a href="#" id="pixelList">NeoPixels 0 to 10 (counterclockwise from the top left
                                    NeoPixel)</a></li>
                        </div>
                    </ol>
                </div>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-start">
                <div class="ms-2 me-auto">
                    <div class="fw-bold">Other</div>
                    <ol class="alpha">
                        <div>
                            <li><a href="#" id="greenLEDList">Power Indicator (left of the USB)</a></li>
                            <li><a href="#" id="USBList">USB Port</a></li>
                            <li><a href="#" id="CPUList">CPU</a></li>
                        </div>
                    </ol>
                </div>
            </li>
        </ol>
    </div>
</div>
    <div class="accordion" id="sensorAccordian">
        <div class="accordion-item">
            <h2 class="accordion-header" id="tempLabHeading">
                <button class="accordion-button" type="button" data-bs-toggle="collapse"
                    data-bs-target="#tempLabCollapse" aria-expanded="true" aria-controls="tempLabCollapse">
                    Temperature Sensor
                </button>
            </h2>
            <div id="tempLabCollapse" class="accordion-collapse collapse show" aria-labelledby="tempLabHeading"
                data-bs-parent="#sensorAccordian">
                <div class="accordion-body">
                    Delete the code currently in the “code” file you opened in <a
                        href="Understanding_your_board.html#learningHeading">step 4 of the Learning to Use Your Board
                        section</a>. Copy and paste the code below into the “code” file and then click “Save”.
                    <pre><code class="language-python">import time
from adafruit_circuitplayground import cp
import displayio
import terminalio
from adafruit_display_text import label
from adafruit_gizmo import tft_gizmo


# Create the TFT Gizmo display
display = tft_gizmo.TFT_Gizmo()


# Sets the brightness of the neopixels on a scale of 0-1.
cp.pixels.brightness = 0.1

# Set these based on your ambient temperature in Fahrenheit for best results!
min_scale_temp = cp.temperature*1.8 + 27
max_scale_temp = min_scale_temp + 10

# This adjusts how many neopixels light up based on the
# min and max temperature values from lines 7 and 8.
def scale_range(value):
    return int((value - min_scale_temp) / (max_scale_temp - min_scale_temp) * 10)

# Used to store the min and max temperatures 
min_temp = cp.temperature*1.8 + 32
max_temp = min_temp

while True:
    # clears the text from the LCD
    splash = displayio.Group()
    display.show(splash)

    c_sum = 0
    for i in range(100):
        c_sum += cp.temperature # Sum 100 temperature samples
    c_avg = c_sum/100 # Calculate the average
    f_avg = c_avg * 1.8 + 32 # Convert the temperature to Fahrenheit
    
    # Updates the min and max temperatures based on the current reading
    if f_avg > max_temp:
        max_temp = f_avg
    elif f_avg < min_temp:
        min_temp = f_avg
    
    # Display the temperature in the console so it can be graphed by the plotter
    print((min_temp, f_avg, max_temp))

    # Depending on where the switch is, either display the temperature using
    # the NeoPixels or the LCD.
    if cp.switch:
        # Determines the number of neopixels to turn on
        peak = scale_range(f_avg)
        for i in range(10):
            if i <= peak:
                cp.pixels[i] = (0, 255, 255)
            else:
                cp.pixels[i] = (0, 0, 0)
    else:
        cp.pixels.fill(0) #Turns all of the NeoPixels off
        text_group = displayio.Group(scale=2, x=30, y=70)
        text = "Min: " + str(round(min_temp, 2)) + " F\nMax: " + str(round(max_temp,2)) + " F\nCurrent: " + str(round(f_avg,2)) + " F"
        text_area = label.Label(terminalio.FONT, text=text, color=0xFFD700)
        text_group.append(text_area)
        splash.append(text_group)


    time.sleep(1) # Waits for 1 second</code></pre>
                    <p>Your display should show the minimum, maximum and current temperature like the image below if the
                        switch is to the right. If the switch is to the left, the NeoPixels should light up based on the
                        temperature. <button class="btn btn-info btn-sm" type="button" data-bs-toggle="offcanvas"
                            data-bs-target="#BluefruitOffcanvas" aria-controls="BluefruitOffcanvas">
                            Bluefruit Board
                        </button></p>
                    <img src="images/Sensor/Front_Temp.jpg" class="img-fluid border border-info" alt="Bluefruit Board"
                        style="width: 200px">
                    <img src="images/Sensor/Back_LED_Temp.jpg" class="img-fluid border border-info" alt="Bluefruit Board"
                        style="width: 200px">

                    <p style="font-size: 20em; color: red;">
                        <i class="fa-solid fa-hand"></i>
                    </p>
                    <p class="text-white bg-danger">Verify this with your instructor. This is part of your grade! </p>
                </div>
            </div>
        </div>
        <div class="accordion-item">
            <h2 class="accordion-header" id="sensorExplorationsHeader">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#SensorExplorations" aria-expanded="false"
                    aria-controls="collapseSensorExplorations">
                    Sensor Explorations
                </button>
            </h2>
            <div id="SensorExplorations" class="accordion-collapse collapse" aria-labelledby="sensorExplorationsHeader"
                data-bs-parent="#sensorAccordian">
                <div class="accordion-body">
                    Pick one of the following explorations.
                    <p class="text-white bg-danger">Once complete, verify this with your instructor. This is part of your
                        grade! </p>
                    <div class="fw-bold">Easy Options</div>
                    <ol class="list-group list-group-numbered">
                        <li class="list-group-item d-flex justify-content-between align-items-start">
                            <div class="ms-2 me-auto">
                                Transmit a message in Morse Code using the NeoPixels or Speaker. <a
                                    class="btn btn-info btn-sm"
                                    href="https://upload.wikimedia.org/wikipedia/commons/b/b5/International_Morse_Code.svg"
                                    role="button" target="_blank">Morse Code Details
                                </a>
                            </div>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-start">
                            <div class="ms-2 me-auto">
                                Create a nightlight. If the light level gets below a certain level (recommend 30), turn
                                the NeoPixels on in whatever color you want. Once the light is above another level
                                (should be three or four levels greater than the turn on level), turn the NeoPixels off.
                                Make sure you have a delay of at least 1 second between each iteration.
                            </div>
                        </li>
                    </ol>
                    <div class="fw-bold">Moderate Options</div>
                    <ol class="list-group list-group-numbered">
                        <li class="list-group-item d-flex justify-content-between align-items-start">
                            <div class="ms-2 me-auto">
                                If the switch is on, the code should do step a. If the switch is off, the code should do
                                step b.
                                <ol class="alpha">
                                    <li>If button A is pushed, set all the NeoPixels on that side of the board to red and
                                        the other side to blue. If button B is pushed, set the the NeoPixels on that
                                        side of the board to red and the other side to blue. If neither button is
                                        pushed, turn off the NeoPixels.</li>
                                    <li>Have the NeoPixels flash red, white, and blue for ½ second each.</li>
                                </ol>
                            </div>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-start">
                            <div class="ms-2 me-auto">
                                Using the A and B buttons steer your turtle around the screen. A should turn the turtle
                                right and B should turn the turtle left. Also, if the switch is on, the turtle should
                                move forward. If the switch is off, the turtle shouldn't move.
                            </div>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-start">
                            <div class="ms-2 me-auto">
                                Use the accelerometer and the NeoPixels to indicate which way the board is tilted.
                            </div>
                        </li>
                    </ol>
                    <div class="fw-bold">Hard Options</div>
                    <ol class="list-group list-group-numbered">
                        <li class="list-group-item d-flex justify-content-between align-items-start">
                            <div class="ms-2 me-auto">
                                Play a short song using the built-in speaker and the notes to frequency information
                                here: <a class="btn btn-info btn-sm"
                                    href="https://professionalcomposers.com/note-frequency-chart/" role="button"
                                    target="_blank">Frequency Chart
                                </a>
                            </div>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-start">
                            <div class="ms-2 me-auto">
                                Display three different images on your LCD. Each image should display for three seconds
                                before going to the next image. Look at the TFT Gizmo Display step 3 code <a
                                    href="Understanding_your_board.html">here</a> for some starter code. You can choose
                                your own images (though you'll need to scale them to 240x240 pixels and save them as
                                bitmaps. You can do this with the paint program.) or you can use the three images
                                provided in the Circuit Playground Lab Files folder.
                            </div>
                        </li>
                    </ol>
                </div>

            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
    <script src="scripts/script.js"></script>
    <script src="scripts/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
</body>

</html>